{"version":3,"sources":["app/components/Keyboard.tsx","app/components/SourceLink.tsx","app/components/ScreenHeader.tsx","app/components/TextBlock.tsx","../../neuralnet/nnet.js","../../neuralnet/textnnet.js","app/GameScreen.tsx","app/components/HistoryChart.tsx","app/gameUtils.ts","app/constants/gameConstants.ts","App.tsx"],"names":["SpecialKeyboardKeys","styles","StyleSheet","create","container","position","right","top","subtitle","SourceLink","View","style","Fab","variant","onClick","Linking","openURL","ScreenHeader","Box","sx","width","textAlign","Typography","component","gutterBottom","TextBlockState","keySequence","row","flexDirection","marginBottom","cell","padding","paddingHorizontal","margin","borderRadius","borderWidth","borderColor","cellDisabled","text","color","fontSize","textDisabled","Keyboard","props","onKeyPress","disabledKeyList","map","rowIndex","key","isDisabled","includes","Pressable","disabled","onPress","Text","ColorMap","GUESS","CORRECT","POSSIBLE","INCORRECT","height","alignItems","justifyContent","fontWeight","TextBlock","state","backgroundColor","toUpperCase","NNEt","inputs","numberOfNodes","numberOfLayers","outputs","learningRate","randomInitialWeights","momentum","activationFunction","this","relu","sigmoid","layers","globalError","i","push","inputId","length","Node","layer","node","weights","bias","forEach","ii","expectedOutputs","error","lastInputs","allOutputs","activateAllLayers","previousLayersDeltas","Array","apply","nextLayersDelta","thisLayersInput","nodeDelta","outputDelta","train","delta","layerInputs","layerOutputs","fire","startingWeight","weight","previousAdjustments","correction","actualOutput","activation","weightAdjustment","activationDerivative","momentumAdjustment","Error","sum","random","Math","x","smaller","exp","fx","textInputs","nonTextInputs","outputChars","outputUpperCase","nonTextOutputs","nnetInputs","letterToNnInput","letter","letterMap","toLowerCase","getWeights","nnet","setWeights","noletter","a","b","c","d","e","f","g","h","j","k","l","m","n","o","p","q","r","s","t","u","v","w","y","z","indexToLetter","index","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","letterToIndex","letterToIndexMap","iii","totalOutputs","ti","nti","input","concat","rawResult","textResult","currentOutputChar","highestProbability","currentBestGuessOfLetter","nonTextOutput","result","expectedTextOutput","expectedNonTextOutput","parsedExpectedTextOutput","expectedOutput","textnnet","chartOptions","title","curveType","legend","historyData","chartData","chartType","data","options","BOARD_TEMPLATE","board","fill","getInitialBoard","wordList","fiveLetterWords","bottomContainer","flexGrow","GameScreen","useState","guessList","setGuessList","inputWord","setInputWord","weightSet","setWeightSet","setNnStatus","setActivationFunction","certainty","setCertainty","answerCertainty","setAnswerCertainty","floor","numberOfPossibleAnswers","setNumberOfPossibleAnswers","timesToTrainWithValidWord","setTimesToTrainWithValidWord","speed","setSpeed","setLayers","setLearningRate","setMomentum","nnGuess","setNnGuess","setNnBestValidGuess","setRandomGuess","gameOver","setGameOver","endGameOnGuessWithDisabledLetter","setEndGameOnGuessWithDisabledLetter","trainWithValidRandomGuess","setTrainWithValidRandomGuess","running","setRunning","trainingMode","setTrainingMode","gamesPlayed","setGamesPlayed","setCurrentWordIndex","turnsPlayed","setTurnsPlayed","turnsPlayedByAi","setTurnsPlayedByAi","nnError","setnnError","setTrainingList","scoreList","scoreHistory","setScoreHistory","gamesWon","setGamesWon","disabledLetters","setDisabledLetters","wordToGuess","useRef","wordToGuessIndex","useEffect","newWord","len","randomIndex","word","getRandomWord","current","sh","splice","guessLen","getExpectedOutput","list","split","slice","setTimeout","runNNet","useCallback","DELETE","prev","cw","gl","dl","flw","correctWord","console","log","disabledLettersInput","disabledLetter","presentLettersInput","correctLettersInput","guess","thisLetterindex","gameProgressInput","totalTurns","currentTurn","turnsArray","generateGameProgress","rawOutput","rawGuess","getHighestNumberIndex","nnBestGuess","invalid","includesDisabledLetter","trainingCount","randomWordLoop","randomWordIndex","randomInteger","newRandomWord","aDifferentResult","newGuessIndex","newGuessWord","window","onmessage","event","useMemo","output","line","char","colIndex","getWordleEmoji","rows","name","value","toFixed","Container","maxWidth","Grid","spacing","HistoryChart","item","md","Card","minWidth","CardContent","Divider","id","Slider","defaultValue","valueLabelDisplay","onChange","step","marks","min","max","FormControl","InputLabel","Select","label","target","MenuItem","Button","TextNNet","parseFloat","htmlFor","Input","display","accept","multiple","type","fileReader","FileReader","readAsText","files","onload","ws","receiveResult","JSON","parse","marginLeft","FormControlLabel","control","Switch","aria-label","defaultChecked","marginTop","noValidate","autoComplete","TextField","helperText","test","filename","element","document","createElement","setAttribute","encodeURIComponent","body","appendChild","click","removeChild","download","stringify","TableContainer","Paper","Table","TableBody","TableRow","border","TableCell","scope","align","_","guessLetter","undefined","letterToShow","mh2","arrayOfNumbers","currentBestGuessOfIndex","number","numberOfOptions","activeResultIndex","expectedResult","stringArray","App","SafeAreaView"],"mappings":"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I,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IACzIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIlE,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClImE,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIvC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIwC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAClIC,EAAG,CAAC,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CA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I,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,IAC1wB,GACA,EACAtI,GACArK,GACA4S,WAAWnT,IACXmT,WAAWjT,IACXC,IAEC4L,GAIHC,IAAW,IAHXA,IAAW,GACXhC,EAAa,MAnBjB,SAwBc,aAEd,wBAAOoJ,QAAQ,wBAAf,UACE,cAACC,EAAA,EAAD,CACE3W,GAAI,CAAE4W,QAAS,QACfC,OAAO,QACPrB,GAAG,wBACHsB,UAAQ,EAACC,KAAK,OACdnB,SAAU,SAAC9N,GACT,IAAMkP,EAAa,IAAIC,WACvBD,EAAWE,WAAWpP,EAAEuO,OAAOc,MAAM,GAAI,SA+BzCH,EAAWI,OAAS,SAACtP,GACfA,GAAKA,EAAEuO,QAAUvO,EAAEuO,OAAOzK,SAC5ByG,QAAQC,IAAI,kBAAmBxK,EAAEuO,OAAOzK,QAhCxB,SAACyL,GAEnB7I,GAAU6I,EAAGxT,QACbsK,GAA2BkJ,EAAGnJ,yBAC9BO,GAAgB4I,EAAG/T,cACnBoL,GAAY2I,EAAG7T,UACfgM,GAAgB6H,EAAG9H,cACnBH,GAA6BiI,EAAGlI,2BAChCD,GAAoCmI,EAAGpI,kCACvCrB,EAAsByJ,EAAG5T,qBAEzBwI,EAAW,IAAIuK,EACb,CAAC,CAAC,IACF,CAEE,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAE1B,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI,CAAC,GAAI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","file":"static/js/app.7b31092c.chunk.js","sourcesContent":["import React from 'react';\nimport {Pressable, StyleSheet, Text, View} from 'react-native';\n\ninterface KeyboardProps {\n  onKeyPress(char: string): void;\n  disabledKeyList: string[];\n}\n\nexport enum SpecialKeyboardKeys {\n  DELETE = 'delete',\n  GUESS = 'guess',\n}\n\nconst keySequence: string[][] = [\n  ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],\n  ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],\n  ['Z', 'X', 'C', 'V', 'B', 'N', 'M'],\n  // [SpecialKeyboardKeys.DELETE, SpecialKeyboardKeys.GUESS],\n];\n\nconst Keyboard = (props: KeyboardProps) => {\n  const {onKeyPress, disabledKeyList} = props;\n\n  return (\n    <>\n      {keySequence.map((row, rowIndex) => {\n        return (\n          <View key={'key-row-' + rowIndex} style={styles.row}>\n            {row.map(key => {\n              const isDisabled = disabledKeyList.includes(key);\n              return (\n                <Pressable\n                  key={key}\n                  disabled={isDisabled}\n                  onPress={() => onKeyPress(key)}>\n                  <View\n                    style={[styles.cell, isDisabled && styles.cellDisabled]}>\n                    <Text\n                      style={[styles.text, isDisabled && styles.textDisabled]}>\n                      {key}\n                    </Text>\n                  </View>\n                </Pressable>\n              );\n            })}\n          </View>\n        );\n      })}\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  row: {\n    flexDirection: 'row',\n    marginBottom: 5,\n  },\n  cell: {\n    padding: 5,\n    paddingHorizontal: 8,\n    margin: 4,\n    borderRadius: 2,\n    borderWidth: 1,\n    borderColor: 'black',\n  },\n  cellDisabled: {\n    borderColor: 'gray',\n  },\n  text: {\n    color: 'black',\n    fontSize: 16,\n  },\n  textDisabled: {\n    color: 'gray',\n  },\n});\n\nexport default Keyboard;\n","import { Fab } from '@mui/material';\nimport React from 'react';\nimport {Linking, Platform, StyleSheet, Text, View} from 'react-native';\n\nconst HOME_URL = 'https://github.com/notseandavis/nnet';\n\nconst SourceLink = () => {\n  return (\n    <View style={styles.container}>\n      <Fab variant=\"extended\" onClick={() => Linking.openURL(HOME_URL)}>\n        github\n      </Fab>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    right: 20,\n    top: 16,\n  },\n  subtitle: {\n    // color: '#5998c5',\n    // fontWeight: '400',\n    // fontSize: 16,\n  },\n});\n\nexport default SourceLink;\n","import { Box, Typography } from '@mui/material';\nimport React from 'react';\nimport {StyleSheet, Text, View} from 'react-native';\n\nconst ScreenHeader = () => {\n  return (\n    <Box sx={{ width: '100%', textAlign: \"center\"}}>\n      <Typography variant=\"h4\" component=\"div\" gutterBottom>\n        wordle ai\n      </Typography>\n    </Box>\n  );\n};\n\nconst styles = StyleSheet.create({\n\n});\n\nexport default ScreenHeader;\n","import React from 'react';\nimport {StyleSheet, Text, View} from 'react-native';\n\nexport enum TextBlockState {\n  GUESS = 'guess',\n  CORRECT = 'correct',\n  POSSIBLE = 'possible',\n  INCORRECT = 'incorrect',\n}\n\nconst ColorMap: Record<TextBlockState, string> = {\n  [TextBlockState.GUESS]: 'transparent',\n  [TextBlockState.CORRECT]: '#76b041',\n  [TextBlockState.POSSIBLE]: '#FFC914',\n  [TextBlockState.INCORRECT]: '#8b939c',\n};\n\ninterface TextBlockProps {\n  text: string;\n  state: TextBlockState;\n}\n\nconst TextBlock = (props: TextBlockProps) => {\n  const {text, state} = props;\n\n  return (\n    <View\n      style={[\n        styles.container,\n        {\n          backgroundColor: ColorMap[state],\n        },\n      ]}>\n      <Text style={styles.text}>{text.toUpperCase()}</Text>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    width: 40,\n    height: 40,\n    borderWidth: 1,\n    borderRadius: 4,\n    borderColor: 'white',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  text: {\n    fontSize: 16,\n    color: '#fff',\n    fontWeight: 'bold',\n  },\n});\n\nexport default TextBlock;\n","// FYI, this is a mess, with too much one-off stuff just to make it work\nexport default class NNEt {\n    constructor(inputs, numberOfNodes, numberOfLayers, outputs = 1, learningRate = 0.3, randomInitialWeights = false, momentum = 0.001, activationFunction = \"sigmoid\") {\n        // array of inputs\n        this.inputs = inputs;\n        // e.x. [[1], [2], [1]]\n        // the number inside the innner arrays represents the number of inputs for each input node\n\n        // Number of outputs, each output has only one output value (which will always be a number between 0.0 and 1.0)\n        this.outputs = outputs;\n        \n        // number of nodes in hidden layer(s)\n        this.numberOfNodes = numberOfNodes;\n\n        // number of hidden layers\n        // TODO: fix layer creation\n        this.numberOfLayers = numberOfLayers + 1;\n\n        // which activation function to use\n        if (activationFunction === \"relu\") {\n            this.activationFunction = relu;\n        } else {\n            this.activationFunction = sigmoid;\n        }\n\n        // Learning rate\n        this.learningRate = learningRate;\n\n        this.momentum = momentum;\n        \n        // Randomize initial weights\n        this.randomInitialWeights = randomInitialWeights;\n        \n        // Here is our array of layers\n        this.layers = [];\n\n        this.globalError = 0;\n\n        // Layer Index\n        let i = 0;\n        \n        // Input layer\n        this.layers.push([]);\n        let inputId = 0;\n        while (this.layers[i].length < inputs.length) {\n            this.layers[i].push(new Node(inputs[inputId][0], this.randomInitialWeights, this.activationFunction));\n            inputId++;\n        }\n        i++;\n        \n        // Middle layer(s)\n        while (this.layers.length < this.numberOfLayers) {\n            this.layers.push([]);\n            if (i === 1) {\n                // Layer below the input layer, gets the number of input\n                while (this.layers[i].length < this.numberOfNodes) {\n                    this.layers[i].push(new Node(inputs.length, this.randomInitialWeights, this.activationFunction)); \n                }\n            } else {\n                // Any middle layer\n                while (this.layers[i].length < this.numberOfNodes) {\n                    this.layers[i].push(new Node(this.numberOfNodes, this.randomInitialWeights, this.activationFunction)); \n                }\n            }\n            i++;\n        }\n\n        // Output layer\n        this.layers.push([]);\n        while (this.layers[i].length < this.outputs) {\n            if (this.layers.length > 2) {\n                // There are middle layers, take the number of nodes as the number of inputs\n                this.layers[i].push(new Node(this.numberOfNodes, this.randomInitialWeights, this.activationFunction));\n            } else {\n                // No middle layers, take the input nodes directly\n                this.layers[i].push(new Node(inputs.length, this.randomInitialWeights, this.activationFunction)); \n            }\n        }\n    }\n    \n    // Get all the weights of the network\n    getWeights() {\n        return this.layers.map(layer => {\n            return layer.map(node => {\n                return { weights: node.weights, bias: node.bias };\n            });\n        });\n    }\n\n    // Set all the weights in the network\n    setWeights(weights) {\n        this.layers.forEach((layer, i) => {\n            layer.forEach((node, ii) => {\n                node.weights = weights[i][ii].weights;\n                node.bias = weights[i][ii].bias;\n            });\n        });\n    }\n\n    // TODO: Clean this up\n    // Train the network using inputs (or last inputs if not previously provided) and expected outputs\n    train(inputs, expectedOutputs) {\n        let error = 0;\n        // console.log(\"training nnet\")\n        if (!inputs) {\n            inputs = this.lastInputs;\n        }\n        let allOutputs = this.activateAllLayers(inputs);\n\n        // Creating an array in the shape of our network so we can store the deltas\n        let previousLayersDeltas = Array.apply(null, Array(this.layers.length)).map(function () { return []; });\n        \n        // get the delta from the bottom layer, \n        // and walk backwards through the layers\n        for (let i = this.layers.length - 1; i >= 0; i--) {\n            for (let ii = (this.layers[i].length - 1); ii >= 0; ii--) {\n                let nextLayersDelta = 0\n                // this layer's input is either the previous layer's output, or the original input\n                let thisLayersInput = i === 0 ? inputs[ii] : allOutputs[i - 1];\n                \n                // Delta for this node\n                let nodeDelta = 0;\n                if (i === this.layers.length - 1) {\n                    // this is the output layer, so we use the expected output for this node\n                    let outputDelta = (expectedOutputs[ii] - allOutputs[i][[ii]])\n                    nodeDelta = outputDelta;\n                    nextLayersDelta = this.layers[i][ii].train(thisLayersInput, nodeDelta, this.learningRate, this.momentum);\n                } else {\n                    // this is some middle or input layer, add up the previous layers together as they all connect together\n                    previousLayersDeltas[i + 1].forEach(delta => { \n                        nodeDelta = delta; \n                        nextLayersDelta += this.layers[i][ii].train(thisLayersInput, nodeDelta, this.learningRate, this.momentum);\n                    });\n                }\n                previousLayersDeltas[i].push(nextLayersDelta)\n                error = error + nextLayersDelta;\n            }\n        }\n        this.globalError = error;\n    }\n\n    activateAllLayers(inputs) {\n        let layerInputs;\n        let layerOutputs = [];\n        this.layers.forEach((layer, i) => {\n            layerOutputs.push([]);\n            layer.forEach((node, ii) => {\n                if (i === 0) {\n                    // Send the set of inputs for the input layer\n                    layerOutputs[i].push(node.fire(inputs[ii]));\n                } else {\n                    // Otherwise, send the output from the previous layer\n                    layerOutputs[i].push(node.fire(layerInputs));\n                }\n            });\n            // inputs for the next layer are outputs from this layer\n            layerInputs = layerOutputs[i];\n        });\n        // final layer has only one output\n        return layerOutputs;\n    }\n    fire(inputs) {\n        this.lastInputs = inputs;\n        let allOutputs = this.activateAllLayers(inputs);\n        // return the final output layer\n        return allOutputs[this.layers.length - 1]\n    }\n}\n\nclass Node {\n    constructor(inputs, randomInitialWeights, activationFunction) {\n        // number of inputs\n        this.inputs = inputs;\n        this.weights = Array.apply(null, Array(inputs)).map(function () { return startingWeight(randomInitialWeights); });\n        this.activationFunction = activationFunction;\n        \n        // Try to initialize a neutral bias\n        let bias = 0;\n        this.weights.forEach(weight => {\n            if (weight > 0) {\n                bias = bias - weight;\n            } else {\n                bias = bias + weight;\n            }\n        });\n        this.bias = bias;\n        this.previousAdjustments = Array.apply(null, Array(inputs)).map(function () { return startingWeight(randomInitialWeights); });\n    }\n    // inputs = [];\n\n    train(inputs, correction, learningRate, momentum) {\n        let actualOutput = activation(inputs, this.weights, this.bias)\n\n        \n        for (let i = 0; i < inputs.length; i++) {\n            let weightAdjustment = correction * activationDerivative(actualOutput, learningRate, this.activationFunction) * inputs[i];\n            let momentumAdjustment = this.previousAdjustments[i] * momentum;\n            this.previousAdjustments[i] = weightAdjustment;\n            this.weights[i] += weightAdjustment + momentumAdjustment;\n        }\n        this.bias = this.bias + learningRate * correction;\n        return correction * activationDerivative(actualOutput, learningRate, this.activationFunction);\n    }\n    fire(inputs) {\n        if (inputs.length > this.weights.length) {\n            throw new Error(\"too many inputs\");\n        }\n        let sum = activation(inputs, this.weights, this.bias)\n        let output = this.activationFunction(sum);\n        return output;\n    }\n}\n\nfunction startingWeight(random) {\n    return random ? Math.random() : 0;\n}\nfunction sigmoid(x) {\n    if (x > 36) {\n        return 0.9999999999999999;\n    }\n    if (x < -36) {\n        return 0.0000000000000001;\n    }\n    let smaller = x;\n    return 1 / (1 + Math.exp(-smaller));\n} \n\nfunction relu(x) {\n    if (x > 0) {\n        return x;\n    } else {\n        return 0;\n    }\n}\n\nfunction activationDerivative(x, learningRate, activationFunction) {\n    const fx = activationFunction(x);\n    return fx * (1 + learningRate - fx);\n}\n\nfunction activation(inputs, weights, bias) {\n    let sum = 0;\n    for (let i = 0; i < inputs.length; i++) {\n        sum += weights[i] * inputs[i]\n    }\n    return sum += bias;\n}","\nimport NNEt from \"./nnet\";\n\n// Work in progress, not usable...\nexport default class TextNNet {\n    constructor(textInputs, nonTextInputs, outputChars = 0, outputUpperCase, nonTextOutputs, layers, learningRate, momentum, activationFunction) {\n        // array of inputs\n        this.nonTextInputs = nonTextInputs;\n        this.textInputs = textInputs;\n        this.nnetInputs = [];\n        this.outputChars = outputChars;\n        this.outputUpperCase = outputUpperCase;\n        this.letterToNnInput = function(letter) {\n            return this.letterMap[letter.toLowerCase()];\n        };\n        this.getWeights = function() {\n            return this.nnet.getWeights();\n        };\n        this.setWeights = function(weights) {\n            this.nnet.setWeights(weights);\n        }\n        this.letterMap = {\n            noletter: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            a: [[1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            b: [[0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            c: [[0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            d: [[0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            e: [[0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            f: [[0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            g: [[0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            h: [[0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            i: [[0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            j: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            k: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            l: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            m: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            n: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            o: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            p: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            q: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0], [0]],\n            r: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0], [0]],\n            s: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0], [0]],\n            t: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0], [0]],\n            u: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0], [0]],\n            v: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0], [0]],\n            w: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0], [0]],\n            x: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0], [0]],\n            y: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1], [0]],\n            z: [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [1]]\n        }\n        this.indexToLetter = function(index) {\n            let map = { \n                0: \"a\",\n                1: \"b\",\n                2: \"c\",\n                3: \"d\",\n                4: \"e\",\n                5: \"f\",\n                6: \"g\",\n                7: \"h\",\n                8: \"i\",\n                9: \"j\",\n                10: \"k\",\n                11: \"l\",\n                12: \"m\",\n                13: \"n\",\n                14: \"o\",\n                15: \"p\",\n                16: \"q\",\n                17: \"r\",\n                18: \"s\",\n                19: \"t\",\n                20: \"u\",\n                21: \"v\",\n                22: \"w\",\n                23: \"x\",\n                24: \"y\",\n                25: \"z\"\n            };\n            return this.outputUpperCase ? map[index].toUpperCase() : map[index]; \n        }\n        this.letterToIndex = function(letter) {\n            letter = letter.toLowerCase();\n            return this.letterToIndexMap[letter];\n        }\n        this.letterToIndexMap = {\n            a: 0,\n            b: 1,\n            c: 2,\n            d: 3,\n            e: 4,\n            f: 5,\n            g: 6,\n            h: 7,\n            i: 8,\n            j: 9,\n            k: 10,\n            l: 11,\n            m: 12,\n            n: 13,\n            o: 14,\n            p: 15,\n            q: 16,\n            r: 17,\n            s: 18,\n            t: 19,\n            u: 20,\n            v: 21,\n            w: 22,\n            x: 23,\n            y: 24,\n            z: 25\n        }\n        for (let i = 0; i < textInputs.length; i++) {\n            for (let ii = 0; ii < textInputs[i]; ii++) {\n\n                for (let iii = 0; iii < 26; iii++) {\n                    this.nnetInputs.push([1]);\n                }\n                // this.nnetInputs.push([26]);\n            }\n        }\n        for (let i = 0; i < nonTextInputs.length; i++) {\n            this.nnetInputs.push(nonTextInputs[i]);\n        }\n        let totalOutputs = 0;\n        if (outputChars && outputChars > 0) {\n            totalOutputs = totalOutputs + outputChars * 26;\n        }\n        if (nonTextOutputs && nonTextOutputs > 0) {\n            totalOutputs = totalOutputs + nonTextOutputs;\n        }\n        this.nnet = new NNEt(this.nnetInputs, this.nnetInputs.length, layers, totalOutputs, learningRate, false, momentum, activationFunction);\n        \n        // nti = non text inputs\n        this.fire = function(ti, nti) {\n            let input = [];\n            for (let i = 0; i < ti.length; i++) {\n                for (let ii = 0; ii < ti[i].length; ii++) \n                {\n                    input.push(...this.letterToNnInput(ti[i][ii]));\n                }\n            }\n            input = input.concat(nti);\n            let rawResult = this.nnet.fire(input);\n            let textResult = \"\";\n            let currentOutputChar = 0;\n            let i = 0;\n            let highestProbability = 0;\n            let currentBestGuessOfLetter = null;\n            let nonTextOutput = [];\n            rawResult.forEach(result => {\n                if (currentOutputChar < this.outputChars) {\n                    if (result > highestProbability) {\n                        highestProbability = result;\n                        currentBestGuessOfLetter = this.indexToLetter(i);\n                    }\n                    if (i == 25) {\n                        i = 0;\n                        textResult = textResult + currentBestGuessOfLetter;\n                        highestProbability = 0;\n                        currentOutputChar++;\n                    } else {\n                        i++;\n                    }\n                } else {\n                    nonTextOutput.push(result);\n                }\n            });\n            return {\n                text: this.outputUpperCase ? textResult.toUpperCase() : textResult,\n                nonTextOutputs: nonTextOutput\n            };\n        }\n\n        this.train = function(ti = null, nti = null, expectedTextOutput = \"\", expectedNonTextOutput = []) {\n            let input = null;\n            if (ti != null && nti != null) {\n                input = [];\n                for (let i = 0; i < ti.length; i++) {\n                    for (let ii = 0; ii < ti[i].length; ii++) \n                    {\n                        input.push(...this.letterToNnInput(ti[i][ii]));\n                    }\n                }\n                input = input.concat(nti);\n            }\n\n            expectedTextOutput = expectedTextOutput ? expectedTextOutput.toLowerCase() : \"\";\n            let parsedExpectedTextOutput = [];\n            for (let i = 0; i < expectedTextOutput.length; i++) {\n                parsedExpectedTextOutput.push(...this.letterMap[expectedTextOutput[i]]);\n            }\n            let expectedOutput = [...parsedExpectedTextOutput, ...expectedNonTextOutput]\n            this.nnet.train(input, expectedOutput);\n        }\n\n    }\n}\n\nfunction blankLetter() { return [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; }\nfunction text(length) { \n    let text = [];\n    for (let i = 0; i < length; i++) {\n        text.push(blankLetter());\n    }\n    return text;\n}","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { StyleSheet, Text, View, Clipboard, Platform, TextInputComponent } from 'react-native';\n// import Button from './components/Button';\nimport Keyboard, { SpecialKeyboardKeys } from './components/Keyboard';\nimport TextBlock, { TextBlockState } from './components/TextBlock';\nimport { MAX_GUESSES, MAX_WORD_LEN } from './constants/gameConstants';\nimport { getInitialBoard, getRandomWord, getWordleEmoji } from './gameUtils';\nimport TextNNet from '../../../neuralnet/textnnet';\nimport fiveLetterWords from './constants/fiveLetterWords.json';\nimport { Button, FormGroup, Switch, FormControlLabel, Box, Container, TableContainer, Table, TableCell, TableRow, Paper, TableBody, TableHead, Grid, Slider, Typography, TextField, Divider, Card, CardContent, InputLabel, MenuItem, Select, FormControl, Input, styled } from '@mui/material';\nimport { Chart } from \"react-google-charts\";\nimport HistoryChart from './components/HistoryChart';\n\nconst BOARD_TEMPLATE = getInitialBoard();\nlet textnnet: TextNNet;\nlet wordList = fiveLetterWords;\n\nconst GameScreen = () => {\n  const [guessList, setGuessList] = useState<string[]>([]);\n  const [inputWord, setInputWord] = useState<string>('');\n  const [weightSet, setWeightSet] = useState<string>('');\n  const [firstGuess, setFirstGuess] = useState<string>('');\n  const [nnStatus, setNnStatus] = useState<string>('');\n  const [activationFunction, setActivationFunction] = useState<string>('sigmoid');\n  const [certainty, setCertainty] = useState<number>(0);\n  const [answerCertainty, setAnswerCertainty] = useState<number>(0);\n  const [numberOfPossibleAnswers, setNumberOfPossibleAnswers] = useState<number>(Math.floor(fiveLetterWords.length / 2));\n  const [randomGuesses, setRandomGuesses] = useState<number>(0);\n  const [timesToTrainWithValidWord, setTimesToTrainWithValidWord] = useState<number>(1);\n  const [speed, setSpeed] = useState<number>(0);\n  const [layers, setLayers] = useState<number>(0);\n  const [learningRate, setLearningRate] = useState<string>(\"0.005\");\n  const [momentum, setMomentum] = useState<string>(\"0.001\");\n  const [nnGuess, setNnGuess] = useState<string>('');\n  const [nnBestValidGuess, setNnBestValidGuess] = useState<string>('');\n  const [randomGuess, setRandomGuess] = useState<string>('');\n  const [gameOver, setGameOver] = useState<boolean>(false);\n  const [endGameOnGuessWithDisabledLetter, setEndGameOnGuessWithDisabledLetter] = useState<boolean>(false);\n  const [hardMode, setHardMode] = useState<boolean>(false);\n  const [trainWithValidRandomGuess, setTrainWithValidRandomGuess] = useState<boolean>(false);\n  const [running, setRunning] = useState<boolean>(false);\n  // const [expectedResult, setExpectedResult] = useState<number[]>([]);\n  const [trainingMode, setTrainingMode] = useState<boolean>(true);\n  const [gamesPlayed, setGamesPlayed] = useState<number>(0);\n  const [currentWordIndex, setCurrentWordIndex] = useState<number>(0);\n  const [turnsPlayed, setTurnsPlayed] = useState<number>(0);\n  const [turnsPlayedByAi, setTurnsPlayedByAi] = useState<number>(0);\n  const [nnError, setnnError] = useState<number>(0);\n  const [originalWeights, setOriginalWeights] = useState<object>({});\n  const [trainingList, setTrainingList] = useState<(number[][] | string[][])[]>([]);\n  const [scoreList, setScoreList] = useState<[number, string][]>([]);\n  const [scoreHistory, setScoreHistory] = useState<[number, number, number][]>([[0, 0, 0]]);\n\n\n\n  const [gamesWon, setGamesWon] = useState<number>(0);\n  const [disabledLetters, setDisabledLetters] = useState<string[]>([]);\n\n  const wordToGuess = useRef<string>('xxxxx');\n  const wordToGuessIndex = useRef<number>(0);\n\n  useEffect(() => {\n    if (gameOver === false) {\n      const newWord = getRandomWord(wordList);\n      wordToGuess.current = newWord.word;\n      wordToGuessIndex.current = newWord.index\n      setCurrentWordIndex(newWord.index);\n      // setExpectedResult(getExpectedOutput(disabledLetters, wordList, wordList.length, newWord.index));\n      setInputWord('');\n      setGuessList([]);\n      setGamesPlayed(gamesPlayed + 1);\n    } else {\n      let sh: [number, number, number][];\n      sh = [...scoreHistory]\n      if (scoreHistory.length > 50) {\n        sh.splice(0, 1);\n      }\n      sh.push([gamesPlayed, certainty, answerCertainty]);\n      setScoreHistory(sh);\n    }\n    if (running) {\n      setGameOver(false)\n    }\n  }, [gameOver]);\n\n\n  useEffect(() => {\n    const guessLen = guessList.length;\n    if (guessList[guessLen - 1] === wordToGuess.current) {\n      if (trainingMode) {\n        // trainingList.forEach((trainingData => {\n        //   textnnet.train(trainingData[0], trainingData[1], null, expectedResult);\n        // }));\n        textnnet.train(null, null, null, getExpectedOutput(disabledLetters, wordList, wordList.length, wordToGuessIndex.current));\n        setnnError(textnnet.nnet.globalError);\n\n      }\n      setTrainingList([]);\n      setGameOver(true);\n\n    } else if (guessLen === MAX_GUESSES || guessList[guessLen - 1] === \"\") {\n      if (trainingMode && textnnet) {\n        textnnet.train(null, null, null, getExpectedOutput(disabledLetters, wordList, wordList.length, wordToGuessIndex.current));\n        setnnError(textnnet.nnet.globalError);\n      }\n      setTrainingList([]);\n      setGameOver(true);\n    } else {\n      const list: string[] = [];\n\n      guessList.forEach(word => {\n        word.split('').forEach(letter => {\n          // console.log({letter});\n          if (!wordToGuess.current.includes(letter)) {\n            list.push(letter);\n          }\n        });\n      });\n\n      setDisabledLetters(list);\n    }\n\n    const list: string[] = [];\n\n  }, [guessList])\n\n  useEffect(() => {\n    wordList = fiveLetterWords.slice(0, numberOfPossibleAnswers)\n  }, [numberOfPossibleAnswers])\n\n  useEffect(() => {\n    // fire the next turn when disabled letters are reset\n    setTurnsPlayed(turnsPlayed + 1);\n    setTimeout(() => {\n      runNNet(wordToGuess.current, guessList, disabledLetters, wordList);\n    }, speed)\n    // window.postMessage('start nnet');\n  }, [disabledLetters])\n\n  // useEffect(() => {\n  // }, [turnsPlayed]);\n\n  const onKeyPress = useCallback(\n    (key: string) => {\n\n      if (key === SpecialKeyboardKeys.DELETE) {\n        setInputWord(prev => prev.slice(0, -1));\n      } else if (key === SpecialKeyboardKeys.GUESS) {\n        setGuessList(prev => [...prev, inputWord.toUpperCase()]);\n        setInputWord('');\n      } else if (key.length === 1) {\n        setInputWord(prev => {\n          if (prev.length < MAX_WORD_LEN && !disabledLetters.includes(key)) {\n            return prev + key;\n          }\n          return prev;\n        });\n      }\n    },\n    [disabledLetters, inputWord],\n  );\n\n  const runNNet = (cw: string, gl: string[], dl: string[], flw: string[]) => {\n    if (!running || !textnnet) {\n      return;\n    }\n\n    let correctWord = cw.split(\"\");\n    console.log(\"running...\")\n    let disabledLettersInput = new Array<number[]>();\n    for (let i = 0; i < 26; i++) {\n      disabledLettersInput.push([0]);\n    }\n\n    for (let i = 0; i < dl.length; i++) {\n      let disabledLetter = dl[i];\n      let disabledLetterIndex = textnnet.letterToIndex(disabledLetter);\n      disabledLettersInput[disabledLetterIndex] = [1];\n    }\n\n    let presentLettersInput = new Array<Array<number>[]>();\n    let correctLettersInput = new Array<string>();\n\n    // for (let i = 0; i < 26; i++) {\n    //   presentLettersInput.push([0]);\n    // }\n    for (let i = 0; i < 5; i++) {\n      correctLettersInput.push(\"noletter\");\n      presentLettersInput.push([]);\n      for (let j = 0; j < 26; j++) {\n        presentLettersInput[i].push([0]);\n      }\n\n    }\n    let presentLetters: string[][] = [];\n\n\n    gl.forEach((guess: string, i) => {\n      for (let ii = 0; ii < guess.length; ii++) {\n        const thisLetterindex = textnnet.letterToIndex(guess[ii]);\n\n        if (correctWord.includes(guess[ii])) {\n          // presentLetters.push([guess[ii]]);\n          if (guess[ii] === correctWord[ii]) {\n            correctLettersInput[ii] = guess[ii];\n          } else {\n            presentLettersInput[i][thisLetterindex] = [1];\n          }\n        }\n      }\n    });\n\n    let gameProgressInput = generateGameProgress(6, guessList.length);\n\n    let input = [[correctLettersInput], [...gameProgressInput, ...disabledLettersInput, ...presentLettersInput[0], ...presentLettersInput[1], ...presentLettersInput[2], ...presentLettersInput[3], ...presentLettersInput[4]]];\n\n    // setTrainingList(prev => [...prev, input]);\n\n    let timesTrained = 0;\n    setNnStatus(\"Playing...\");\n\n    setRandomGuess(\"\");\n    setNnBestValidGuess(\"\");\n\n    setNnGuess(\"\");\n\n    let rawOutput = textnnet.fire(input[0], input[1]).nonTextOutputs;\n\n\n\n    // Best overall guess from NN\n    let rawGuess = getHighestNumberIndex(rawOutput);\n    setCertainty(rawGuess.certainty);\n    setAnswerCertainty(rawOutput[wordToGuessIndex.current]);\n    let nnBestGuess: string = flw[rawGuess.index].toUpperCase();\n    // let sl = getScoresWithWords(rawOutput, flw);\n    // setScoreList(sl);\n    let turnPlayedByAi = true;\n    let invalid: string = \"\";\n\n    if (includesDisabledLetter(dl, nnBestGuess) && (endGameOnGuessWithDisabledLetter || trainWithValidRandomGuess)) {\n      invalid = \"(invalid)\";\n      // If the very best guess is not valid, do some stuff\n      if (endGameOnGuessWithDisabledLetter) {\n        // If we are supposed to end the game when a disabled letter is guessed, end it.\n        setGuessList(prev => [...prev, \"\"]);\n      } else if (trainWithValidRandomGuess) {\n\n        let trainingCount = 0;\n        // let aDifferentResult = getExpectedOutput(wordList.length, bestValidGuessIndex);\n\n\n        let newResult = \"\";\n        let randomWordLoop = () => {\n          let randomWordIndex = randomInteger(0, flw.length - 1);\n          let newRandomWord = flw[randomWordIndex].toUpperCase();\n          while (includesDisabledLetter(dl, newRandomWord)) {\n            randomWordIndex = randomInteger(0, flw.length - 1);\n            newRandomWord = flw[randomWordIndex].toUpperCase();\n          }\n\n          setRandomGuess(newRandomWord);\n\n          let aDifferentResult = getExpectedOutput(dl, flw, flw.length, -1);\n          textnnet.train(null, null, null, aDifferentResult);\n          setnnError(textnnet.nnet.globalError);\n          let newGuessRawOutput = textnnet.fire(input[0], input[1]).nonTextOutputs;\n          let newGuessIndex = getHighestNumberIndex(newGuessRawOutput).index;\n          let newGuessWord = flw[newGuessIndex].toUpperCase();\n\n          if (includesDisabledLetter(dl, newGuessWord) && trainingCount < 1) {\n            trainingCount++;\n            setTimeout(randomWordLoop, speed);\n          } else {\n            setGuessList(prev => [...prev, newRandomWord]);\n          }\n        }\n        randomWordLoop();\n      }\n\n    } else {\n      if (nnBestGuess === wordToGuess.current) {\n        setGamesWon(gamesWon + 1);\n      }\n\n      if (guessList.length > 0) {\n        setTurnsPlayedByAi(turnsPlayedByAi + 1);\n      }\n      setGuessList(prev => [...prev, nnBestGuess]);\n    }\n    setNnGuess(nnBestGuess + invalid)\n\n  };\n\n  const callback = (event: MessageEvent) => {\n    if (event.data == 'start nnet') {\n      runNNet(wordToGuess.current, guessList, disabledLetters, wordList);\n    }\n  };\n\n  window.onmessage = callback;\n\n  const wordleEmoji: string = useMemo(() => {\n    if (!gameOver) {\n      return '';\n    }\n\n    return getWordleEmoji(wordToGuess.current, guessList);\n  }, [gameOver, guessList]);\n  const scores = scoreList.slice(0, 10);\n  const rows = [\n    {\n      name: \"Possible Answers\",\n      value: numberOfPossibleAnswers\n    },\n    {\n      name: \"Best Guess\",\n      value: nnGuess\n    },\n    {\n      name: \"Best Guess Certainty\",\n      value: certainty.toFixed(5)\n    },\n    {\n      name: \"Answer\",\n      value: wordToGuess.current\n    },\n    // {\n    //   name: \"Score of answer\",\n    //   value: scoreHistory[scoreHistory.length - 1]?\n    // },\n    {\n      name: \"Turns Played\",\n      value: turnsPlayed\n    },\n    {\n      name: \"Games Played\",\n      value: gamesPlayed\n    },\n    {\n      name: \"Games Won\",\n      value: gamesWon\n    },\n    {\n      name: \"Win Ratio\",\n      value: (Math.floor((gamesWon / gamesPlayed) * 100) / 100).toFixed(5)\n    },\n    {\n      name: \"Neural Net Error\",\n      value: nnError.toFixed(5)\n    }\n  ];\n\n  return (\n    <Box>\n      <Container maxWidth=\"lg\">\n        <Grid container spacing=\"2\">\n\n          <HistoryChart historyData={scoreHistory} />\n          <Grid item md={6}>\n\n            {(!running && weightSet !== \"exporting\") && <>\n              <Card sx={{ minWidth: 275 }}>\n                <CardContent>\n\n                  <Typography variant=\"h5\">\n                    Neural Network Options\n                  </Typography>\n                  <Divider></Divider>\n                  <Typography variant=\"subtitle2\" id=\"non-linear-slider\" gutterBottom>\n                    (you can't change these later)\n                  </Typography>\n                  <br></br>\n                  <Typography id=\"non-linear-slider\" gutterBottom>\n                    Middle Layers in neural network:\n                  </Typography>\n\n                  <Slider\n                    disabled={textnnet}\n                    defaultValue={layers}\n                    value={layers}\n                    // getAriaValueText={}\n                    valueLabelDisplay=\"auto\"\n                    onChange={(e, value) => {\n                      setLayers(value)\n                    }}\n                    step={1}\n                    marks\n                    min={0}\n                    max={10}\n                  />\n\n                  <Typography gutterBottom>\n                    Number of possible answers:\n                  </Typography>\n\n                  <Slider\n                    // disabled={textnnet}\n                    // defaultValue={numberOfPossibleAnswers}\n                    value={numberOfPossibleAnswers}\n                    // getAriaValueText={}\n                    valueLabelDisplay=\"auto\"\n                    onChange={(e, value) => {\n                      setNumberOfPossibleAnswers(value);\n                    }}\n                    step={1}\n                    // marks\n                    min={1}\n                    max={fiveLetterWords.length}\n                  />\n                  <FormControl sx={{\n                    m: 3, minWidth: 200\n                  }}>\n                    <InputLabel id=\"demo-simple-select-label\">Activation Function</InputLabel>\n                    <Select\n                      // labelId=\"demo-simple-select-label\"\n                      id=\"activation-function\"\n                      value={activationFunction}\n                      label=\"Activation Function\"\n                      onChange={(e) => {\n                        setActivationFunction(e.target.value);\n                      }}\n                    >\n                      <MenuItem value={'sigmoid'}>Sigmoid</MenuItem>\n                      <MenuItem value={'relu'}>ReLU</MenuItem>\n                    </Select>\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    (used in all layers)\n                  </Typography>\n                  </FormControl>\n\n\n                  <br></br>\n                  <Button disabled={running} variant=\"contained\" onClick={() => {\n                    if (!textnnet) {\n                      textnnet = new TextNNet(\n                        [[5]],\n                        [\n                          // game progress\n                          [1], [1], [1], [1], [1], [1],\n                          // other inputs\n                          [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1]],\n                        0,\n                        true,\n                        numberOfPossibleAnswers,\n                        layers,\n                        parseFloat(learningRate),\n                        parseFloat(momentum),\n                        activationFunction);\n                    }\n                    if (!running) {\n                      setRunning(true);\n                      setGuessList([]);\n                    } else {\n                      setRunning(false);\n                    }\n\n                  }}>{running ? \"Start AI\" : \"Start AI\"}</Button>\n\n                  <label htmlFor=\"contained-button-file\">\n                    <Input\n                      sx={{ display: \"none\" }}\n                      accept=\".json\"\n                      id=\"contained-button-file\"\n                      multiple type=\"file\"\n                      onChange={(e) => {\n                        const fileReader = new FileReader();\n                        fileReader.readAsText(e.target.files[0], \"UTF-8\");\n                        let receiveResult = (ws: any) => {\n\n                          setLayers(ws.layers);\n                          setNumberOfPossibleAnswers(ws.numberOfPossibleAnswers);\n                          setLearningRate(ws.learningRate);\n                          setMomentum(ws.momentum);\n                          setTrainingMode(ws.trainingMode);\n                          setTrainWithValidRandomGuess(ws.trainWithValidRandomGuess);\n                          setEndGameOnGuessWithDisabledLetter(ws.endGameOnGuessWithDisabledLetter);\n                          setActivationFunction(ws.activationFunction);\n\n                          textnnet = new TextNNet(\n                            [[5]],\n                            [\n                              // game progress\n                              [1], [1], [1], [1], [1], [1],\n                              // other inputs\n                              [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1]],\n                            0,\n                            true,\n                            ws.numberOfPossibleAnswers,\n                            ws.layers,\n                            parseFloat(ws.learningRate),\n                            parseFloat(ws.momentum),\n                            ws.activationFunction);\n                          textnnet.nnet.setWeights(ws.weights);\n                          setRunning(true);\n                          setGuessList([]);\n                        }\n\n                        fileReader.onload = (e: Event) => {\n                          if (e && e.target && e.target.result) {\n                            console.log(\"e.target.result\", e.target.result);\n                            let ws = JSON.parse(e.target.result);\n                            receiveResult(ws);\n                          }\n                        }\n                      }}\n                    />\n                    <Button variant=\"outlined\" component=\"span\" sx={{ marginLeft: 1 }}>\n                      Import Weight Set\n                    </Button>\n                  </label>\n                </CardContent>\n              </Card>\n            </>\n            }\n            <br />\n            <Card sx={{ minWidth: 275 }}>\n              <CardContent>\n                <Typography variant=\"h5\">\n                  Game Options\n                </Typography>\n                <Divider></Divider>\n                \n\n                <FormControlLabel control={\n                  <Switch onChange={(e, value) => {\n                    setEndGameOnGuessWithDisabledLetter(value)\n                    if (value === false) {\n                      setTrainWithValidRandomGuess(false);\n                    }\n                  }} />\n                } label=\"End game on guesses with disabled letters\" />\n\n                <Typography variant=\"subtitle2\" gutterBottom>\n                  (can speed up training)\n                </Typography>\n                <br />\n                <Typography id=\"non-linear-slider\" gutterBottom>\n                  Speed (ms):\n                </Typography>\n                <Slider\n                  aria-label=\"Speed\"\n                  value={speed}\n                  // getAriaValueText={}\n                  valueLabelDisplay=\"auto\"\n                  onChange={(e, value) => {\n                    setSpeed(value)\n                  }}\n                  step={200}\n                  marks\n                  min={0}\n                  max={3000}\n                />\n                <br />\n                <br/>\n                <Typography variant=\"h5\">\n                  Training Options\n                </Typography>\n                <Divider></Divider>\n                <br/>\n                <FormControlLabel control={\n                  <Switch defaultChecked onChange={(e, value) => {\n                    setTrainingMode(value);\n                  }} />\n                } label=\"Train with correct word after game\" />\n                {!endGameOnGuessWithDisabledLetter ? (<>\n                  <FormControlLabel control={\n                    <Switch onChange={(e, value) => {\n                      setTrainWithValidRandomGuess(value)\n                    }} />\n                  } label=\"Train with random valid guess if AI guesses disabled letter\" />\n                  {trainWithValidRandomGuess && (<><Typography id=\"non-linear-slider\" gutterBottom>\n                    Train up to {timesToTrainWithValidWord} time(s) after invalid guess:\n                  </Typography>\n                    <Slider\n                      aria-label=\"Train with valid random guess\"\n                      value={timesToTrainWithValidWord}\n                      // getAriaValueText={}\n                      valueLabelDisplay=\"auto\"\n                      onChange={(e, value) => {\n                        setTimesToTrainWithValidWord(value)\n                      }}\n                      step={1}\n                      marks\n                      min={1}\n                      max={100}\n                    />\n                  </>)}\n                </>) : (<></>)}\n                <Box\n                  component=\"form\"\n                  sx={{\n                    '& > :not(style)': { m: 1, width: '40%', marginTop: '20px' },\n                  }}\n                  noValidate\n                  autoComplete=\"off\"\n                >\n                  <TextField\n                    id=\"outlined-basic\"\n                    margin=\"normal\"\n                    label=\"Learning Rate (between 0 and 1)\"\n                    variant=\"outlined\"\n                    value={learningRate}\n                    helperText=\"Changes can break the game\"\n                    onChange={(e) => {\n                      if (/(?:0)?((?:\\.\\d+)|(?:\\.))$/.test(e.target.value)) {\n                        setLearningRate(e.target.value);\n                        if (textnnet) {\n                          textnnet.nnet.learningRate = parseFloat(e.target.value);\n                        }\n                      }\n\n                    }} />\n                  <TextField\n                    label=\"Momentum (between 0 and 1\"\n                    id=\"outlined-basic\"\n                    margin=\"normal\"\n                    helperText=\"Changes can break the game\"\n                    variant=\"outlined\"\n                    value={momentum}\n                    onChange={(e) => {\n\n                      if (/^(0(\\.\\d+)?|1(\\.0+)?)$/.test(e.target.value)) {\n                        setMomentum(e.target.value);\n                        if (textnnet) {\n                          textnnet.nnet.momentum = parseFloat(e.target.value);\n                        }\n                      }\n                    }} />\n                </Box>\n\n                <br></br>\n\n                <Button disabled={!running} variant=\"outlined\" onClick={() => {\n                  setRunning(false);\n                  setWeightSet(\"exporting\");\n                  setTimeout(() => {\n                    download(\"weightset.json\", JSON.stringify({\n                      layers,\n                      learningRate,\n                      momentum,\n                      trainingMode,\n                      trainWithValidRandomGuess,\n                      endGameOnGuessWithDisabledLetter,\n                      numberOfPossibleAnswers,\n                      weights: textnnet.nnet.getWeights()\n\n                    }));\n                    setTimeout(() => {\n                      setRunning(true);\n                      setGuessList([]);\n                      setWeightSet(\"\");\n\n                    }, speed * 2);\n                  }, speed * 2);\n                }}>Export Weight Set</Button>\n              </CardContent>\n            </Card>\n            <br />\n            <Card sx={{ minWidth: 275 }}>\n              <CardContent>\n                <Typography variant=\"h5\">\n                  Info\n                </Typography>\n                <Divider></Divider>\n                <Box sx={{ marginTop: \"20px\" }} >\n                  <Button variant=\"contained\" onClick={() => { setTurnsPlayedByAi(0); setTurnsPlayed(0); setGamesPlayed(0); setGamesWon(0);; }}>Reset Statistics</Button>\n                </Box>\n\n                <TableContainer component={Paper}>\n                  <Table>\n                    <TableBody>\n                      {rows.map((row) => (\n                        <TableRow\n                          key={row.name}\n                          sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n                        >\n                          <TableCell component=\"th\" scope=\"row\">\n                            {row.name}\n                          </TableCell>\n                          <TableCell align=\"right\">{row.value}</TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              </CardContent>\n            </Card>\n          </Grid>\n          <Grid item md={6}>\n\n\n            {BOARD_TEMPLATE.map((row, rowIndex) => {\n              return (\n                <View key={`row-${rowIndex}`} style={styles.row}>\n                  {row.map((_, colIndex) => {\n                    const guessLetter = guessList[rowIndex]?.[colIndex];\n                    let state: TextBlockState = TextBlockState.GUESS;\n\n                    if (guessLetter === undefined) {\n                      state = TextBlockState.GUESS;\n                    } else if (guessLetter === wordToGuess.current[colIndex]) {\n                      state = TextBlockState.CORRECT;\n                    } else if (wordToGuess.current.includes(guessLetter)) {\n                      state = TextBlockState.POSSIBLE;\n                    } else {\n                      state = TextBlockState.INCORRECT;\n                    }\n\n                    const letterToShow =\n                      rowIndex === guessList.length\n                        ? inputWord[colIndex]\n                        : guessLetter;\n\n                    return (\n                      <View style={styles.mh2} key={`col-${colIndex}`}>\n                        <TextBlock text={letterToShow || ''} state={state} />\n                      </View>\n                    );\n                  })}\n                </View>\n              );\n            })}\n\n            <View style={styles.bottomContainer}>\n              <Keyboard\n                disabledKeyList={[\n                  ...disabledLetters,\n                  inputWord.length !== MAX_WORD_LEN\n                    ? SpecialKeyboardKeys.GUESS\n                    : '',\n                ]}\n                onKeyPress={onKeyPress}\n              />\n            </View>\n\n            {/* <Typography variant=\"h5\">\n      Top 10 Guesses\n    </Typography>\n      <TableContainer component={Paper}>\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Dessert (100g serving)</TableCell>\n            <TableCell align=\"right\">Calories</TableCell>\n            <TableCell align=\"right\">Fat&nbsp;(g)</TableCell>\n            <TableCell align=\"right\">Carbs&nbsp;(g)</TableCell>\n            <TableCell align=\"right\">Protein&nbsp;(g)</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {scores.map((score, i) => (\n            <TableRow\n              key={i}\n              sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n            >\n              <TableCell component=\"th\" scope=\"row\">\n                {i + 1}\n              </TableCell>\n              <TableCell align=\"right\">{score[1]}</TableCell>\n              <TableCell align=\"right\">{score[0]}</TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer> */}\n          </Grid>\n        </Grid>\n      </Container>\n    </Box>\n  );\n};\n\nconst styles = StyleSheet.create({\n  // mb12: {\n  //   marginBottom: 12,\n  // },\n  // mh2: {\n  //   marginHorizontal: 2,\n  // },\n  // // button: {\n  // //   // maxWidth: '200px',\n  // //   width: '100%',\n  // // },\n  // fg1: {\n  //   flexGrow: 1,\n  // },\n  // textWhite: {\n  //   color: '#fff',\n  //   fontSize: 22,\n  // },\n  row: {\n    marginBottom: 4,\n    flexDirection: 'row',\n    justifyContent: 'center',\n  },\n  // buttons: {\n  //   maxWidth: 300,\n  //   justifyContent: 'center',\n  // },\n  bottomContainer: {\n    flexGrow: 1,\n    marginBottom: 16,\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n  },\n  // score: {\n  //   color: '#fff',\n  //   fontSize: 14,\n  //   marginBottom: 12,\n  // },\n  // buttonRow: {\n  //   flexDirection: 'row',\n  // },\n  // buttonSpacer: {\n  //   width: 12,\n  // },\n  // gamesplayed: {\n  //   textAlign: \"left\",\n  //   color: '#fff',\n  //   width: '300px',\n  // }\n});\n\nexport default GameScreen;\n\n// const letterIndex = new Map<string, number>([\n//   [\"a\", 0],\n//   [\"b\", 1],\n//   [\"c\", 2],\n//   [\"d\", 3],\n//   [\"e\", 4],\n//   [\"f\", 5],\n//   [\"g\", 6],\n//   [\"h\", 7],\n//   [\"i\", 8],\n//   [\"j\", 9],\n//   [\"k\", 10],\n//   [\"l\", 11],\n//   [\"m\", 12],\n//   [\"n\", 13],\n//   [\"o\", 14],\n//   [\"p\", 15],\n//   [\"q\", 16],\n//   [\"r\", 17],\n//   [\"s\", 18],\n//   [\"t\", 19],\n//   [\"u\", 20],\n//   [\"v\", 21],\n//   [\"w\", 22],\n//   [\"x\", 23],\n//   [\"y\", 24],\n//   [\"z\", 25],\n// ]);\n\nfunction getBestValidGuess(scoresAndIndexes: { score: number, index: number, word: string }[], disabledLetters: string[]) {\n\n  let i = scoresAndIndexes.length;\n  let bestValidGuess;\n  while (!bestValidGuess && i > -1) {\n    i--;\n    let thisWord = wordList[scoresAndIndexes[i].index];\n    if (!includesDisabledLetter(disabledLetters, thisWord)) {\n      bestValidGuess = thisWord;\n    }\n  }\n  return bestValidGuess ? { word: bestValidGuess.toUpperCase(), index: i } : { word: \"\", index: 0 };\n}\n\nfunction getScoresWithWords(arrayOfNumbers: number[], words: string[]) {\n  let scoresAndIndexes: [number, string][] = [];\n  arrayOfNumbers.forEach((n, i) => {\n    scoresAndIndexes.push([n, words[i].toUpperCase()]);\n    // scoresAndIndexes[i].push(n);\n    // scoresAndIndexes[i].push()\n  })\n  scoresAndIndexes.sort((a, b) => {\n    return b[0] - a[0];\n  });\n  return scoresAndIndexes;\n}\n\nfunction getHighestNumberIndex(arrayOfNumbers: number[]) {\n\n  let highestProbability = 0;\n  let currentBestGuessOfIndex = 0;\n  arrayOfNumbers.forEach((number, i) => {\n    if (number > highestProbability) {\n      highestProbability = number;\n      currentBestGuessOfIndex = i;\n    }\n  });\n  return { index: currentBestGuessOfIndex, certainty: highestProbability };\n}\nfunction getExpectedOutput(disabledLetters: string[], wordList: string[], numberOfOptions: number, activeResultIndex: number) {\n  let expectedResult: number[] = []\n  for (var i = 0; i < numberOfOptions; i++) {\n    expectedResult.push(activeResultIndex === i ? 1 : (includesDisabledLetter(disabledLetters, wordList[i].toUpperCase()) ? .01 : .7));\n  }\n  return expectedResult;\n}\n\nfunction randomInteger(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n// function hardModeValidation(correctLetters: string[], presentLetters: guess: string) {\n\n// }\n\nfunction includesDisabledLetter(disabledLetters: string[], word: string) {\n  let stringArray = word.toUpperCase().split(\"\")\n  while (stringArray.length > 0) {\n    if (disabledLetters.includes(stringArray[0])) {\n      return true;\n    }\n    stringArray.splice(0, 1);\n  }\n  return false;\n}\n\nfunction generateGameProgress(totalTurns: number, currentTurn: number) {\n  let turnsArray = [];\n  while (turnsArray.length < totalTurns) {\n    turnsArray.push([currentTurn > turnsArray.length ? 0 : 1]);\n  }\n  return turnsArray;\n}\n\nfunction download(filename, text) {\n  var element = document.createElement('a');\n  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n  element.setAttribute('download', filename);\n\n  element.style.display = 'none';\n  document.body.appendChild(element);\n\n  element.click();\n\n  document.body.removeChild(element);\n}","import React from 'react';\nimport Chart from 'react-google-charts';\nimport {Pressable, StyleSheet, Text, View} from 'react-native';\n\ninterface HistoryChartProps {\n  historyData: [number, number, number][];\n}const chartOptions = {\n  title: \"Accuracy\",\n  curveType: \"function\",\n  legend: { position: \"bottom\" },\n};\nconst Keyboard = (props: HistoryChartProps) => {\n  const {historyData} = props;\n  const chartData = [...[[\"Game\", \"Best Guess Certainty\", \"Correct Answer Certainty\"]], ...historyData];\n\n  return (\n    <>\n\n      <Chart\n            chartType=\"LineChart\"\n            width=\"100%\"\n            height=\"400px\"\n            data={chartData}\n            options={chartOptions}\n          />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  row: {\n    flexDirection: 'row',\n    marginBottom: 5,\n  },\n  cell: {\n    padding: 5,\n    paddingHorizontal: 8,\n    margin: 4,\n    borderRadius: 2,\n    borderWidth: 1,\n    borderColor: 'black',\n  },\n  cellDisabled: {\n    borderColor: 'gray',\n  },\n  text: {\n    color: 'black',\n    fontSize: 16,\n  },\n  textDisabled: {\n    color: 'gray',\n  },\n});\n\nexport default Keyboard;\n","import fiveLetterWords from './constants/fiveLetterWords.json';\nimport {MAX_GUESSES} from './constants/gameConstants';\n\nexport const getInitialBoard = (): string[][] => {\n  const board: string[][] = [];\n  for (let i = 0; i < MAX_GUESSES; i++) {\n    board.push(new Array(5).fill(''));\n  }\n\n  return board;\n};\n\nexport const getRandomWord = (wordList: string[]): { word: string, index: number } => {\n  const len = wordList.length;\n  const randomIndex = Math.floor(Math.random() * 100000) % len;\n  return {\n    word: wordList[randomIndex].toUpperCase(),\n    index: randomIndex\n  };\n};\n\nexport const getWordleEmoji = (word: string, guessList: string[]): string => {\n  const hasWon = guessList[guessList.length - 1] === word;\n\n  let output = `Wordle ${hasWon ? guessList.length : 'x'}/${MAX_GUESSES}\\n\\n`;\n\n  guessList.forEach(row => {\n    let line = '';\n\n    row.split('').forEach((char, colIndex) => {\n      if (char === word[colIndex]) {\n        line += '🟩';\n      } else if (word.includes(char)) {\n        line += '🟨';\n      } else {\n        line += '⬜️';\n      }\n    });\n\n    output += line + '\\n';\n  });\n\n  return output;\n};\n","export const MAX_GUESSES = 6;\nexport const MAX_WORD_LEN = 5;\n","import React from 'react';\nimport {SafeAreaView, StyleSheet, View} from 'react-native';\nimport SourceLink from './app/components/SourceLink';\nimport ScreenHeader from './app/components/ScreenHeader';\nimport GameScreen from './app/GameScreen';\n\nexport default function App() {\n  return (\n    <View>\n      <SafeAreaView>\n        <ScreenHeader />\n        <GameScreen />\n        <SourceLink />\n      </SafeAreaView>\n    </View>\n    \n  );\n}\n\nconst styles = StyleSheet.create({\n  // container: {\n  //   flex: 1,\n  //   backgroundColor: '#000',\n  // },\n});\n"],"sourceRoot":""}